第四章 函数与程序结构

函数用于分解任务，一个程序可以保存在一个或多个源文件中，各个文件可以单独编译

每一个外部对象只能有一个定义

函数定义形式：
 返回值类型 函数名（参数声明表）{
    声明和语句
 }


程序可以看作变量定义和函数定义的集合，函数之间的通信可以通过参数、函数返回值以及外部变量进行。
函数在源文件出现的次序可以是任意的，只要保证每个函数不会被分离到多个文件

被调用函数通过return向调用者返回值，return 表达式； 必要时，表达式将被转换为函数的返回值类型。

#### 外部变量

C语言程序可以看成是一系列的外部对象构成，这些外部变量可能是变量或函数。

默认情况下，外部变量和函数具有以下性质：通过同一个名字对外部变量的所有引用（即使这种引用来自单独编译的不同函数）实际上都是引用同一个对象（这一性质称为外部链接）。
我们可以通过static关键字定义只能在某一个源文件中使用的外部变量和函数。


因为外部变量可以在全局范围内访问，这就为函数之间的数据交换提供了一种可以代替函数参数和返回值的方式。

外部变量的用途还体现在它们和自动变量比，有更大的作用域和更长的生存期。自动变量只能在函数内使用，外部变量是永久的，它们的值在一次函数调用到下一次函数调用之间保持不变。

如果变量定义在任何函数的外部，则是外部变量

#### 作用域规则

名字的作用域指程序中可以使用该名字的部分

外部变量或函数的作用域从声明它开始，到其所在的文件的末尾结束。
如果要在外部变量的定义之前使用该变量，或者外部变量的定义和变量的使用不在同一个源文件中，则必须在相应的变量声明中强制使用关键字extern

变量声明用于说明变量的属性（主要是变量的类型）；变量定义除了声明变量属性，还会将引起存储器的分配

**头文件**

用staticshengm限定外部变量与函数，可以将其后声明的对象作用域限定为被编译源文件的剩余部分，
通过static限定外部对象，可以达到隐藏外部对象的目的
static限定函数的话，则该函数名除了对该函数声明所在的文件可见外，其他文件都无法访问

static声明内部变量，和自动变量相同的是只能在函数内部使用，但不管函数是否被调用，它一直存在，static的内部变量是一种只能在某个特定函数使用但一直占据存储空间但变量


初始化
    没有显示初始化的情况下，外部变量和静态变量都将被初始化为0，如果显示初始化的话，初始化表达式必须是常量表达式，且只初始化一次

    自动变量和寄存器变量初值则没有定义，每次进入函数或程序块时都将被初始化，初始化表达式可以不是常量表达式：可以包括任意在此之前定义的值，包括函数调用

    数组的初始化可以通过初始化列表， 'int a[] = {1,2,3}'的形式,则数组长度就是指定的参数个数，如果定义了长度，但参数不够，剩余的会被初始化0

    字符数组的初始化可以用'char s[]={'a','b'}'，也可以通过字符串代替，'char s[]="asf"'，字符串会在后面加入'\0'

**预处理器**

作用：编译过程中单独执行的步骤，做准备工作

#include：用于编译期间将指定文件内容包含进当前文件，#include<文件名>或#include "文件名"

#define：用任意字符序列代替一个标记，宏替换，"#define 名字 替换文本" ，
会将所有的"名字"替换成"替换文本",绝对替换，不做任何修改或计算，所以为了解决歧义，通常每个替换文件中关键字都加入"()"括号限制；
例如定义一个宏max： "#define max(A,B) A>B?A:B "，如果有个语句是max(1+2,2),会被替换成max(1+2 > 2 ? 1+2 : 2)

#undef :取消名字的宏定义，可以确保后续的调用是函数调用，而不是宏调用

预处理的条件语句：对预处理本身进行控制，条件语句是在预处理执行过程中进行计算

#if
#elif
#endif

测试某个文件是否已经包含

#if !define(HDR)
#define HDR
#include <>
#endif

或

#ifndef HDR
#define HDR
#include<>
#endif






